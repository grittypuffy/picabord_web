module.exports=[54161,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(97895);let e=(0,c.cva)("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},3130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("shadcn-card rounded-xl border-0 bg-card text-card-foreground shadow-lg hover:shadow-xl transition-shadow duration-300",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c})).displayName="CardDescription";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));h.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},7509,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(3130),g=a.i(54161),h=a.i(70106);let i=(0,h.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),j=(0,h.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),k=(0,h.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),l=(0,h.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function m(){let[a,h]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)({title:"",excerpt:"",category:"Software",tags:"[]",image:"",content:""}),w=(0,d.useRouter)();(0,c.useEffect)(()=>{x(),y()},[]);let x=async()=>{try{let a=await fetch("/api/cms/auth/status");(await a.json()).isAuthenticated||w.push("/cms/login")}catch(a){w.push("/cms/login")}},y=async()=>{try{let a=await fetch("/api/cms/posts");if(a.ok){let b=await a.json();h(b)}}catch(a){console.error("Failed to load posts:",a)}finally{n(!1)}},z=async()=>{await fetch("/api/cms/logout",{method:"POST"}),w.push("/cms/login")},A=()=>{r(null),v({title:"",excerpt:"",category:"Software",tags:"[]",image:"",content:""}),p(!0)},B=async a=>{try{let b=await fetch(`/api/cms/posts/${a}`),c=await b.json();r(a),v({title:c.title||"",excerpt:c.excerpt||"",category:c.category||"Software",tags:c.tags||"[]",image:c.image||"",content:c.content||""}),p(!0)}catch(a){alert("Failed to load post")}},C=async a=>{a.preventDefault();try{let a=q?`/api/cms/posts/${q}`:"/api/cms/posts",b=await fetch(a,{method:q?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),c=await b.json();c.success?(alert(q?"Post updated!":"Post created!"),p(!1),y()):alert("Error: "+c.error)}catch(a){alert("Failed to save post")}},D=async(a,b)=>{if(confirm(`Delete "${b}"?`))try{let b=await fetch(`/api/cms/posts/${a}`,{method:"DELETE"}),c=await b.json();c.success?(alert("Post deleted!"),y()):alert("Error: "+c.error)}catch(a){alert("Failed to delete post")}},E=async a=>{let b=a.target.files?.[0];if(b){if(b.size>5242880)return void alert("File too large. Maximum size is 5MB.");if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(b.type))return void alert("Invalid file type. Only JPEG, PNG, GIF, and WebP are allowed.");t(!0);try{let a=new FormData;a.append("file",b);let c=await fetch("/api/cms/upload",{method:"POST",body:a}),d=await c.json();d.success?(v(a=>({...a,image:d.url})),alert("Image uploaded successfully!")):alert("Error: "+d.error)}catch(a){alert("Failed to upload image")}finally{t(!1)}}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/20",children:[(0,b.jsx)("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-chart-1 bg-clip-text text-transparent font-picabord",children:"PICABORD CMS"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Blog Management"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>w.push("/"),children:"â† Website"}),(0,b.jsxs)(e.Button,{variant:"destructive",onClick:z,children:[(0,b.jsx)(l,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold",children:"Blog Posts"}),(0,b.jsxs)(e.Button,{onClick:A,children:[(0,b.jsx)(k,{className:"w-4 h-4 mr-2"}),"Create Post"]})]}),m?(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading..."}):0===a.length?(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"py-12 text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No posts yet"}),(0,b.jsx)(e.Button,{onClick:A,children:"Create your first post"})]})}):(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(a=>(0,b.jsxs)(f.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{className:"line-clamp-2",children:a.title}),(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,b.jsx)(g.Badge,{variant:"outline",children:a.category}),(0,b.jsx)(g.Badge,{variant:"secondary",children:a.date})]})]}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-4",children:a.excerpt}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{size:"sm",variant:"outline",onClick:()=>B(a.id),children:[(0,b.jsx)(j,{className:"w-3 h-3 mr-1"}),"Edit"]}),(0,b.jsxs)(e.Button,{size:"sm",variant:"destructive",onClick:()=>D(a.id,a.title),children:[(0,b.jsx)(i,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})]},a.id))})]}),o&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:(0,b.jsxs)(f.Card,{className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:q?"Edit Post":"Create New Post"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),(0,b.jsx)("input",{type:"text",required:!0,value:u.title,onChange:a=>v({...u,title:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Post title"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Category"}),(0,b.jsxs)("select",{value:u.category,onChange:a=>v({...u,category:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,b.jsx)("option",{value:"Software",children:"Software"}),(0,b.jsx)("option",{value:"Hardware",children:"Hardware"}),(0,b.jsx)("option",{value:"Industry Insights",children:"Industry Insights"}),(0,b.jsx)("option",{value:"Company News",children:"Company News"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Featured Image"}),(0,b.jsxs)("div",{className:"space-y-3",children:[u.image&&(0,b.jsxs)("div",{className:"relative w-full h-48 border rounded-lg overflow-hidden bg-muted",children:[(0,b.jsx)("img",{src:u.image,alt:"Preview",className:"w-full h-full object-cover"}),(0,b.jsx)("button",{type:"button",onClick:()=>v({...u,image:""}),className:"absolute top-2 right-2 bg-destructive text-white px-3 py-1 rounded-md text-sm hover:bg-destructive/90",children:"Remove"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)("label",{className:"flex-1",children:[(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:E,className:"hidden",disabled:s}),(0,b.jsx)("div",{className:"w-full px-4 py-2 border border-dashed rounded-lg text-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors",children:s?"Uploading...":"ðŸ“¤ Upload Image"})]})}),(0,b.jsx)("input",{type:"text",value:u.image,onChange:a=>v({...u,image:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm",placeholder:"Or paste image URL"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Upload an image or paste a URL. Leave empty for no image."})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Excerpt"}),(0,b.jsx)("textarea",{value:u.excerpt,onChange:a=>v({...u,excerpt:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:3,placeholder:"Brief description"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Tags (JSON array)"}),(0,b.jsx)("input",{type:"text",value:u.tags,onChange:a=>v({...u,tags:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:'["tag1", "tag2"]'})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Content (MDX) *"}),(0,b.jsx)("textarea",{required:!0,value:u.content,onChange:a=>v({...u,content:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm",rows:12,placeholder:"Write your MDX content here..."})]}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{type:"submit",children:q?"Update Post":"Create Post"})]})]})})]})})]})}a.s(["default",()=>m],7509)}];

//# sourceMappingURL=_2af22cef._.js.map