(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94179,e=>{"use strict";var t=e.i(43476),a=e.i(25913),s=e.i(47163);let r=(0,a.cva)("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function l({className:e,variant:a,...l}){return(0,t.jsx)("div",{className:(0,s.cn)(r({variant:a}),e),...l})}e.s(["Badge",()=>l])},70065,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(47163);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("shadcn-card rounded-xl border-0 bg-card text-card-foreground shadow-lg hover:shadow-xl transition-shadow duration-300",e),...a}));r.displayName="Card";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));l.displayName="CardHeader";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));i.displayName="CardTitle",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...a})).displayName="CardDescription";let o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));o.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>o,"CardHeader",()=>l,"CardTitle",()=>i])},89655,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(67881),l=e.i(70065),i=e.i(94179),o=e.i(75254);let n=(0,o.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),d=(0,o.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),c=(0,o.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),u=(0,o.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function m(){let[e,o]=(0,a.useState)([]),[m,x]=(0,a.useState)(!0),[p,g]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),[y,j]=(0,a.useState)(!1),[v,b]=(0,a.useState)({title:"",excerpt:"",category:"Software",tags:"[]",image:"",content:""}),w=(0,s.useRouter)();(0,a.useEffect)(()=>{N(),C()},[]);let N=async()=>{try{let e=await fetch("/api/cms/auth/status");(await e.json()).isAuthenticated||w.push("/cms/login")}catch(e){w.push("/cms/login")}},C=async()=>{try{let e=await fetch("/api/cms/posts");if(e.ok){let t=await e.json();o(t)}}catch(e){console.error("Failed to load posts:",e)}finally{x(!1)}},k=async()=>{await fetch("/api/cms/logout",{method:"POST"}),w.push("/cms/login")},P=()=>{f(null),b({title:"",excerpt:"",category:"Software",tags:"[]",image:"",content:""}),g(!0)},S=async e=>{try{let t=await fetch(`/api/cms/posts/${e}`),a=await t.json();f(e),b({title:a.title||"",excerpt:a.excerpt||"",category:a.category||"Software",tags:a.tags||"[]",image:a.image||"",content:a.content||""}),g(!0)}catch(e){alert("Failed to load post")}},B=async e=>{e.preventDefault();try{let e=h?`/api/cms/posts/${h}`:"/api/cms/posts",t=await fetch(e,{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),a=await t.json();a.success?(alert(h?"Post updated!":"Post created!"),g(!1),C()):alert("Error: "+a.error)}catch(e){alert("Failed to save post")}},T=async(e,t)=>{if(confirm(`Delete "${t}"?`))try{let t=await fetch(`/api/cms/posts/${e}`,{method:"DELETE"}),a=await t.json();a.success?(alert("Post deleted!"),C()):alert("Error: "+a.error)}catch(e){alert("Failed to delete post")}},M=async e=>{let t=e.target.files?.[0];if(t){if(t.size>5242880)return void alert("File too large. Maximum size is 5MB.");if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type))return void alert("Invalid file type. Only JPEG, PNG, GIF, and WebP are allowed.");j(!0);try{let e=new FormData;e.append("file",t);let a=await fetch("/api/cms/upload",{method:"POST",body:e}),s=await a.json();s.success?(b(e=>({...e,image:s.url})),alert("Image uploaded successfully!")):alert("Error: "+s.error)}catch(e){alert("Failed to upload image")}finally{j(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/20",children:[(0,t.jsx)("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-chart-1 bg-clip-text text-transparent font-picabord",children:"PICABORD CMS"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Blog Management"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>w.push("/"),children:"â† Website"}),(0,t.jsxs)(r.Button,{variant:"destructive",onClick:k,children:[(0,t.jsx)(u,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold",children:"Blog Posts"}),(0,t.jsxs)(r.Button,{onClick:P,children:[(0,t.jsx)(c,{className:"w-4 h-4 mr-2"}),"Create Post"]})]}),m?(0,t.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading..."}):0===e.length?(0,t.jsx)(l.Card,{children:(0,t.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No posts yet"}),(0,t.jsx)(r.Button,{onClick:P,children:"Create your first post"})]})}):(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsxs)(l.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{className:"line-clamp-2",children:e.title}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)(i.Badge,{variant:"outline",children:e.category}),(0,t.jsx)(i.Badge,{variant:"secondary",children:e.date})]})]}),(0,t.jsxs)(l.CardContent,{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 mb-4",children:e.excerpt}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(r.Button,{size:"sm",variant:"outline",onClick:()=>S(e.id),children:[(0,t.jsx)(d,{className:"w-3 h-3 mr-1"}),"Edit"]}),(0,t.jsxs)(r.Button,{size:"sm",variant:"destructive",onClick:()=>T(e.id,e.title),children:[(0,t.jsx)(n,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})]},e.id))})]}),p&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:(0,t.jsxs)(l.Card,{className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsx)(l.CardTitle,{children:h?"Edit Post":"Create New Post"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),(0,t.jsx)("input",{type:"text",required:!0,value:v.title,onChange:e=>b({...v,title:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Post title"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Category"}),(0,t.jsxs)("select",{value:v.category,onChange:e=>b({...v,category:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,t.jsx)("option",{value:"Software",children:"Software"}),(0,t.jsx)("option",{value:"Hardware",children:"Hardware"}),(0,t.jsx)("option",{value:"Industry Insights",children:"Industry Insights"}),(0,t.jsx)("option",{value:"Company News",children:"Company News"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Featured Image"}),(0,t.jsxs)("div",{className:"space-y-3",children:[v.image&&(0,t.jsxs)("div",{className:"relative w-full h-48 border rounded-lg overflow-hidden bg-muted",children:[(0,t.jsx)("img",{src:v.image,alt:"Preview",className:"w-full h-full object-cover"}),(0,t.jsx)("button",{type:"button",onClick:()=>b({...v,image:""}),className:"absolute top-2 right-2 bg-destructive text-white px-3 py-1 rounded-md text-sm hover:bg-destructive/90",children:"Remove"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)("label",{className:"flex-1",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:M,className:"hidden",disabled:y}),(0,t.jsx)("div",{className:"w-full px-4 py-2 border border-dashed rounded-lg text-center cursor-pointer hover:border-primary hover:bg-primary/5 transition-colors",children:y?"Uploading...":"ðŸ“¤ Upload Image"})]})}),(0,t.jsx)("input",{type:"text",value:v.image,onChange:e=>b({...v,image:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm",placeholder:"Or paste image URL"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Upload an image or paste a URL. Leave empty for no image."})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Excerpt"}),(0,t.jsx)("textarea",{value:v.excerpt,onChange:e=>b({...v,excerpt:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:3,placeholder:"Brief description"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Tags (JSON array)"}),(0,t.jsx)("input",{type:"text",value:v.tags,onChange:e=>b({...v,tags:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:'["tag1", "tag2"]'})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Content (MDX) *"}),(0,t.jsx)("textarea",{required:!0,value:v.content,onChange:e=>b({...v,content:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary font-mono text-sm",rows:12,placeholder:"Write your MDX content here..."})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),(0,t.jsx)(r.Button,{type:"submit",children:h?"Update Post":"Create Post"})]})]})})]})})]})}e.s(["default",()=>m],89655)}]);